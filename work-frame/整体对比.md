## 前言

在当前社区占有率极高的React、Vue，从诞生起至今给我们带来了许多新的概念：虚拟Dom、JSX、Diff算法、Hooks等等。而当人们都完全接受虚拟dom并认为虚拟dom比直接的dom操作优异时，诸如Svelte、solidJs这类重编译的框架又步入了人们的视野。

基础前端框架的发展逐渐在运行时和编译时寻求一个平衡，同时也开始从单页应用开始向SSR应用拓展。在层出不穷的前端框架中，我们该如何看清其本质。我觉得首先要先去了解它，因此本文将从宏观的角度，分别介绍这些社区中的框架佼佼者，希望对你有一定帮助。

## Vue

TODO

谈到`vue`，个人认为其与其他框架相比最具特色的两大特性：

- 基于指令的模版语法

- 基于数据劫持的响应式原理

### 模版语法

vue的模版语法基于HTML，辅以插值表达式、指令来对视图进行描述，并且vue内部也提供了一些内置的组件以及组件插槽来提供进阶使用。

#### 插值表达式

插值表达式使用Mustache语法即两个花括号，花括号内支持使用表达式，因此支持简单的逻辑处理，如三元表达式、函数调用等

```html
<!-- 文本展示 -->
{{ name }}

<!-- 计算 -->
{{ num + 1 }}

<!-- 三元表达式 -->
{{ condition ? a : b}}

<!-- 函数调用 -->
{{ translateText() }}
```

#### 指令

指令即带有`v-`前缀的属性，模版通过指令来实现条件渲染、循环渲染、事件处理以及双向绑定等功能。并且开发者也可以通过自定义指令，在模版层面实现一定程度的逻辑复用。

```html
<!-- 条件渲染 -->
<h1 v-if="condition">this is a text</h1>
<h2 v-else></h2>

<!-- 列表渲染 -->
<div v-for="(item,index) in list" :key="index">{{item}}</div>

<!-- 事件处理 -->
<button @click="handleClick">this is a btn1</button>
<button v-on:click="handleClick('text')">this is a btn2</button>
<button @click.passive="handleClick">this is a btn3</button>


<!-- 双向绑定 -->
<input v-model="text">
```

#### 插槽

在组件中使用插槽能够帮助提升组件的拓展复用性。

```html
<!-- 插槽 -->

<!-- TestButton组件模版 -->
<button class="test-btn">
  <slot></slot>
</button>

<!-- 使用TestButton -->
<TestButton>
  Click me! <!-- 插槽内容 -->
</TestButton>


<!-- 渲染结果 -->
<button class="test-btn">Click me!</button>
```

### 响应式系统

vue的响应式系统提供了许多方式来将数据定义为响应式数据（响应式数据与普通数据的不同点在于能够在数据改变时触发一系列动作，例如视图的自动更新、副作用函数的自动调用）

例如直接使用字面量的方式在data中声明；使用组合式api：ref、reactive、computed等api声明

```typescript
export default defineComponent({
  name: 'HomeView',
  components: {
    HelloWorld,
  },
  data() {
    return {
      // data中返回对象便为响应式数据   
      count: 1,     
      name: 'foo' 
    }
  },
  setup() {
    // ref
    const num = ref(0)
    const text = ref('')

    // computed
    const computedText = computed(() => {
      return text.value + 'computed!!!'
    })

    // reactive
    const list = reactive([1,2,3,4,5,6,7,8,9,10])
    const info = reactive({
      name:'foo',
      age:18
    })

    return {
      num,
      list,
      text,
      info,
      computedText
    }
  }
});

```

vue的响应式系统的实现核心原理为数据劫持，通过defineProperty（vue3为proxy）来对数据对象进行劫持，令其变为响应式数据。视图（模版）编译后的render函数会监听组件内的响应式数据，当响应式数据一旦发生改变会对所有监听它的观察者进行响应，因此视图便会自动更新。在之后的文章中，我们对这一过程进行详细的分析。

## React

React作为当前社区中占比最高的前端框架，在其`All in Js`的理念下，React创造了JSX，主张将HTML和CSS都用JS的方式进行书写。同时在随着其函数式组件的不断发展，React又提出了Hooks，给社区带来了一些管理状态以及逻辑复用的新思路。

### JSX

我们在刚刚介绍Vue时，提到Vue使用模版来进行视图的描述。而React则是使用JSX来描述试图，并且JSX也支持条件判断、循环渲染以及事件的处理

### Hooks

## Svelte

## Magix

## 横向对比

## 总结
